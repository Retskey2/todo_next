import Head from 'next/head'
import styles from '../styles/Home.module.scss'
import Image from "next/image";
import plus from "../public/plus.png"
import {useAppDispatch, useAppSelector} from "../redux/hooks";
import {addTodo, removeTodo, selectTodoData} from "../redux/slices/todo";
import {useRef} from "react";
import deleteIcon from "../public/delete.png"

export default function Home() {
    const refInput = useRef()
    const todoData = useAppSelector(selectTodoData)
    const dispatch = useAppDispatch();

    function addTodoApp() {
        const value = refInput.current.value
        if (value !== '') {
            dispatch(addTodo(value))
        }
    }

    function deleteTodoApp(id) {
        if (id !== '') {
            dispatch(removeTodo(id))
        }
    }


    return (
        <div>
            <Head>
                <title>Create Next App</title>
                <meta name="description" content="Generated by create next app"/>
                <link rel="icon" href="/favicon.ico"/>
            </Head>
            <div className={styles.wrapper}>
                <div className={styles.head}>Todo App</div>
                <div className={styles.inputMain}>
                    <input ref={refInput} type="text" placeholder="Todo.." className={styles.input}/>
                    <div className={styles.AddBtn} onClick={addTodoApp}>
                        <Image
                            src={plus}
                            width={24}
                            height={24}
                        >
                        </Image>
                    </div>
                </div>
                {Object.entries(todoData.todo)
                    .map(([key, value]) => {
                        return (
                            <div className={styles.todo} key={key}>
                                {value.message}
                                <Image
                                    onClick={() => {
                                        deleteTodoApp(key)
                                    }}
                                    className={styles.image}
                                    src={deleteIcon}
                                    width={32}
                                    height={32}
                                />
                            </div>
                        )
                    })
                }
            </div>
        </div>
    )
}

